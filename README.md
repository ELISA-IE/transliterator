# transliterator

## How to run

```
java -jar server.jar [PORT]
```

If the option `PORT` is not specified, the server will run over port 10086 by default. Files under `config` and `data` directory are required.

File `wiki_name_pairs.txt` is required by the automatic pair extraction module but not uploaded due to large size. Please ask me for the file.

## APIs

### Training API

```
127.0.0.1:10086/train?name=Ying&lang=ben&maxx=3&maxy=4&data=NEWS
```

The required pair file is submitted via POST method. This API returns a `key` which can be used to check the training state using the query API.

- parameter:
	  + name: uploader
	  + lang: language code
	  + maxx(optional): Maximum length of substring x (default: 2)
	  + maxy(optional): Maximum length of substring y (default: 2)
	  + maxfn(optional): max function (default: joint, option: joint, conXY, conYX)
	  + cutoff(optional): m2m-aligner training threshold (default: 0.001)
	  + data(optional): data source


### Transliteration API

```
127.0.0.1:10086/trans?query=ஆப்ஷர்&key=12180&typeFilter=false
```

This API returns three lists: 1) `jscm`: original transliteration candidates generated by JSCM. 2) `joint`: hypotheses revised using entity linking. 3) `entity`: entites that are linked.

- method: GET
- parameter:
	  + query: text string to be transliterated
	  + key: model key
	  + finalSize(optional): candidate number (default: 10)
	  + beamSize(optioanl): beam size (default: 10)
	  + trimNumber(optional): trim number (default: 50)
	  + typeFilter(optional): filter linked entities in terms of type or not (default: false)


### Query API

```
127.0.0.1:10086/query?all=true
```

This API is used for listing existing models. Only one option of the three (`all`, `lang` or `key`) can be used at the same time.

- method: GET
- parameter:
    + all: list all models (default: false)
	  + lang: list all models of the specified language
	  + key: list the model with the specified key


### Extract API

```
127.0.0.1:10086/extract?lang=ben
```

This API is used for extracting transliteration pairs from Wikipedia title pairs. It generates a pair file and a unique key, which can be used to process and align the pairs using the process API.

- method: GET
- parameter:
	  + lang: language code used by Wiki (different from language code we use)

### Process API

```
127.0.0.1:10086/process?key=12180&clone=true

process existing pair file (uploaded or extracted from Wiki)
- method: GET
- parameter:
	  + key
	  + clone: clone a new state or not (default: false, which will overwrite the old model file if exists)
